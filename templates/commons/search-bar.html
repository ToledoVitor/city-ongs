<div class="my-6">
  <form method="get">
    <div class="relative group">
      <div class="absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none">
        <svg class="w-5 h-5 text-gray-400 group-focus-within:text-blue-500 transition-colors duration-200" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
        </svg>
      </div>
      
      <input
        type="search"
        id="id-search-input"
        name="q"
        value="{{ search_query }}"
        placeholder="{{ placeholder|default:'Pesquisar...' }}"
        class="
          block
          w-full
          pl-12
          pr-32
          py-4
          text-sm
          text-gray-900
          bg-white
          border
          border-gray-300
          rounded-xl
          shadow-sm
          placeholder-gray-500
          transition-all
          duration-200
          focus:outline-none
          focus:ring-2
          focus:ring-blue-500
          focus:border-blue-500
          focus:shadow-md
          hover:border-gray-400
          hover:shadow-sm
        "
        autocomplete="off"
        spellcheck="false"
      />
      
      <div class="absolute inset-y-0 right-0 flex items-center pr-2">
        <button
          type="submit"
          class="
            inline-flex
            items-center
            justify-center
            px-6
            py-2.5
            text-sm
            font-medium
            text-white
            bg-blue-600
            border
            border-transparent
            rounded-lg
            shadow-sm
            transition-all
            duration-200
            hover:bg-blue-700
            hover:shadow-md
            focus:outline-none
            focus:ring-2
            focus:ring-offset-2
            focus:ring-blue-500
            active:bg-blue-800
            disabled:opacity-50
            disabled:cursor-not-allowed
          "
        >
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          Buscar
        </button>
      </div>
    </div>
    
    {% if search_query %}
    <div class="mt-3 flex flex-wrap gap-2">
      <div class="text-xs text-gray-500">
        Pesquisando por: <span class="font-medium text-gray-700">"{{ search_query }}"</span>
      </div>
    </div>
    {% endif %}
  </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('id-search-input');
  const searchForm = searchInput.closest('form');
  
  document.addEventListener('keydown', function(e) {
    if (e.key === '/' && !['INPUT', 'TEXTAREA'].includes(e.target.tagName)) {
      e.preventDefault();
      searchInput.focus();
    }
    
    if (e.key === 'Escape' && e.target === searchInput) {
      searchInput.value = '';
      searchInput.blur();
    }
  });
  
  searchForm.addEventListener('submit', function() {
    const submitButton = searchForm.querySelector('button[type="submit"]');
    const buttonText = submitButton.querySelector('span') || submitButton;
    const originalText = buttonText.textContent || buttonText.innerText;
    
    submitButton.disabled = true;
    buttonText.textContent = 'Buscando...';
    
    setTimeout(() => {
      submitButton.disabled = false;
      buttonText.textContent = originalText;
    }, 3000);
  });
  
  searchInput.addEventListener('focus', function() {
    this.select();
  });
});
</script>